<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>객체,생성자,객체배열</title>
</head>
<body>
    <h1>Obejct</h1>
    <h2>객체 생성</h2>
    <input type="button" value="실행" onclick="test1();">
    <script>
        /*
            Object : "속성명 : 속성값"으로 구성된 요소를 관리하는 객체
             - 속성명 : 식별자의 역할을 하며 문자열 혹은 정수값으로 작성 가능
             - 속성값 : 모든 타입 가능 (hashMap과 비슷하다)
        */
        function test1() {
            const obj1 = {
                name : "고길동", // 기본적으로 문자열로 해석하기 때문에 쌍따옴표 필요없음
                "age" : 33,
                married : true,
                hobby : ['축구','농구','야구'],
                pet : {
                    name : '둘리',
                    breed : '공룡'
                },
                123 : 456,
                "foo-bar-o" : '푸바오~'
            };
            // 객체 내부 속성에 접근하는 방법
            const obj2 = new Object(); // {}
            // 1) 점 표기법(dot notation)
            obj2.pname = '말린 망고'; // {pname : '말린 망고'}
            obj2.price = 3000;
            // 2) 대괄호 표기법(bracket notation)
            //  - 리터럴값 혹은 값을 저장한 변수를 제시해야 함
            //obj2[ori] = '필리핀'; 
            // ori 라는 변수에 담겨있는 값을 담기 때문에 선언된 적이 없어서 에러 발생
            obj2["origin"] = '필리핀';
            obj2["ty-pe"] = "건망고";
            // 특수기호 또는 띄어쓰기가 포함된 속성명을 사용하려면 무조건 대괄호 표기법을 사용해야 함
            console.log(obj2);
            console.log(obj2.pname);
            console.log(obj2["pname"]);
        }
    </script>
    <h2>메서드</h2>
    <input type="button" value="실행" onclick="test2();">
    <script>
        let gv = "gv";
        function test2() {
            // 자바에서는 class 안에 선언한 함수를 메서드
            // 자스에서는 객체안에 선언한 함수를 메서드라고 부름
            const pet = {
                petName : "까망이",
                eat  : function(food) { // 익명 함수만 가능
                    console.log(this.petName+"가 "+food+"를 맛있게 먹는다.");
                    // 객체의 메서드에서 this는 메서드를 호출한 객체의 주소값이 담겨있다.
                    let lv = "lv";
                    console.log(gv, lv);
                    // this 키워드가 없으면 자바스크립트는 현재 스코프 내에서 petName이라는
                    // 변수를 찾으려고 함. 하지만 eat 메서드 내부에는 petName이라는 지역변수가
                    // 선언되어 있지 않으므로 자바스크립트는 petName을 전역변수로 인식하려 시도
                    // 전역에 그런 이름의 변수가 없다면 undefined가 됨
                }
            };
            console.log(pet);
            pet.eat('사료');
        }
    </script>
    <h2>속성 순회 | 동적 제어</h2>
    <input type="button" value="실행" onclick="test3();">
    <input type="button" value="게임종료" onclick="test4();">
    <input type="button" value="동적제어" onclick="test5();">
    <input type="button" value="toString" onclick="test6();">
    <script>
        let game;
        function test3() {
            game = {
                title : 'DIABLO4',
                price : 35000,
                lang : ['ko','en','cn'],
                run : function() { 
                    console.log(this.title+"을 실행합니다...");
                    // 시작시간 기록
                    this["start-time"] = new Date();
                },
                shutdown : function() {
                    console.log(this.title+"을 종료합니다...");
                    // 종료시간 기록
                    this["end-time"] = new Date();
                },
                duration : function() {
                    let dur = (this["end-time"] - this["start-time"]); // ms 단위
                    dur = dur / 1000; // 초단위
                    dur = dur / 60; // 분단위
                    dur = Math.floor(dur * 10) / 10; // 소수점 첫째자리에서 버림처리
                    console.log(dur+"분 동안 게임하셨네요");
                }
            };
            // 객체 반복문 돌리기
            for(let key in game) {
                console.log("key : " + key);
                console.log("value : " + game.key); // undefined
                // 점 표기법으로 접근, key라는 이름의 속성명을 찾음
                // key를 변수로서 사용을 하려면 대괄호 표기법으로 접근해야 함
                console.log("value : " + game[key]);
            }
            game.run();
        }
        function test4() {
            //game.shutdown(); // undefined.shutdown() 널포인터랑 비슷한 에러 발생
            game && game.shutdown();
        }
    </script>
</body>
</html>